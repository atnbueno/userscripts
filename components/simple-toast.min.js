// simple-toast.js by Antonio Bueno - MIT License - https://github.com/atnbueno/userscripts

class SimpleToast extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){const t=this.getAttribute("type")||"info",m=this.getAttribute("message")||"",i={error:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 81"><path d="M15 0A15 15 0 000 15v36a15 15 0 0015 15h6v12a3 3 0 003 3 3 3 0 002.121-.879L40.242 66H75a15 15 0 0015-15V15A15 15 0 0075 0H15zm17.271 17.271a3 3 0 012.122.88L45 28.757 55.607 18.15a3 3 0 014.243 0 3 3 0 010 4.243L49.242 33 59.85 43.607a3 3 0 010 4.243 3 3 0 01-4.243 0L45 37.242 34.393 47.85a3 3 0 01-4.243 0 3 3 0 010-4.243L40.758 33 30.15 22.393a3 3 0 010-4.243 3 3 0 012.121-.879z" fill="#fff"/></svg>`,info:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 81"><path d="M15 0A15 15 0 000 15v36a15 15 0 0015 15h6v12a3 3 0 003 3 3 3 0 002.121-.879L40.242 66H75a15 15 0 0015-15V15A15 15 0 0075 0H15zm30 12a4.5 4.5 0 014.5 4.5A4.5 4.5 0 0145 21a4.5 4.5 0 01-4.5-4.5A4.5 4.5 0 0145 12zm-6 15h7.5a3 3 0 013 3v18H54a3 3 0 013 3 3 3 0 01-3 3H39a3 3 0 01-3-3 3 3 0 013-3h4.5V33H39a3 3 0 01-3-3 3 3 0 013-3z" fill="#fff"/></svg>`,success:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 81"><path d="M15 0A15 15 0 000 15v36a15 15 0 0015 15h6v12a3 3 0 003 3 3 3 0 002.121-.879L40.242 66H75a15 15 0 0015-15V15A15 15 0 0075 0H15zm45 15a3 3 0 013 3 3 3 0 01-.428 1.545l-17.9 29.818a3 3 0 01-.074.123l-.04.067A3 3 0 0142 51a3 3 0 01-2.098-.86l-.002.003-.052-.053L27.91 38.152l-.031-.03.002-.003A3 3 0 0127 36a3 3 0 013-3 3 3 0 012.12.88l.001-.001.031.031 9.248 9.248 16.028-26.703A3 3 0 0160 15z" fill="#fff"/></svg>`,wait:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 81"><path d="M15 0A15 15 0 000 15v36a15 15 0 0015 15h6v12a3 3 0 003 3 3 3 0 002.121-.879L40.242 66H75a15 15 0 0015-15V15A15 15 0 0075 0H15zm9 27a6 6 0 016 6 6 6 0 01-6 6 6 6 0 01-6-6 6 6 0 016-6zm21 0a6 6 0 016 6 6 6 0 01-6 6 6 6 0 01-6-6 6 6 0 016-6zm21 0a6 6 0 016 6 6 6 0 01-6 6 6 6 0 01-6-6 6 6 0 016-6z" fill="#fff"/></svg>`,warning:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 81"><path d="M15 0A15 15 0 000 15v36a15 15 0 0015 15h6v12a3 3 0 003 3 3 3 0 002.121-.879L40.242 66H75a15 15 0 0015-15V15A15 15 0 0075 0H15zm30 12a4.5 4.5 0 014.5 4.5 4.5 4.5 0 01-.004.184h.004L48 37.664h-.004A3 3 0 0145 40.5a3 3 0 01-2.996-2.84H42l-1.5-20.976h.004a4.5 4.5 0 01-.004-.184A4.5 4.5 0 0145 12zm0 33a4.5 4.5 0 014.5 4.5A4.5 4.5 0 0145 54a4.5 4.5 0 01-4.5-4.5A4.5 4.5 0 0145 45z" fill="#fff"/></svg>`},c={error:"#FF3B30CC",info:"#007AFFCC",success:"#34C759CC",wait:"#8E8E93CC",warning:"#FF9500CC"},h=i[t]||i.info,b=c[t]||c.info;this.shadowRoot.innerHTML=`<style>:host{--fade-duration:0.3s}div{display:flex;align-items:center;gap:.5rem;margin-top:.5rem;padding:1rem 1.3rem;border-radius:2rem;background:${b};color:#fff;box-shadow:0 .2rem .4rem #0000004D;font-family:system-ui,sans-serif;word-break:break-word;opacity:1;transition:opacity var(--fade-duration) ease;user-select:none;cursor:default}svg{width:2rem}.hide{opacity:0;transition:opacity var(--fade-duration) ease}</style><div>${h} ${m}</div>`}}
customElements.define("simple-toast",SimpleToast);

class ToastContainer extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"});this.shadowRoot.innerHTML=`<style>:host{position:fixed;bottom:1.5rem;right:1.5rem;z-index:99;display:flex;flex-direction:column;align-items:flex-end;gap:.5rem;max-width:calc(100vw - 3rem);pointer-events:none;transform:translateY(100%);transition:transform .3s ease}:host(.visible){transform:translateY(0);pointer-events:auto}</style><slot></slot>`}showToast(t,m="info",d=5e3){const e=document.createElement("simple-toast");e.setAttribute("message",t),e.setAttribute("type",m),this.shadowRoot.appendChild(e),this.classList.add("visible");const n=e.shadowRoot.querySelector("div"),s=getComputedStyle(n).getPropertyValue("--fade-duration").trim()||"0.5s";let r=parseFloat(s)*(s.endsWith("s")?1e3:1);setTimeout(()=>{n.classList.add("hide"),n.addEventListener("transitionend",()=>{e.remove(),1===this.shadowRoot.children.length&&this.classList.remove("visible")},{once:!0})},d-r)}}
customElements.define("toast-container",ToastContainer);

function toast(m,t="info",d=5){let c=document.querySelector("toast-container");c||(c=document.createElement("toast-container"),document.body.appendChild(c)),c.showToast(m,t,1e3*d)}
window.toast=toast;
